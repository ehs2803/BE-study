# 예외처리(Exception handling)

- 컴파일 에러 : 컴파일 시 발생
- 런타임 에러 : 실행 시 발생하는 에러
- 논리적 에러 : 실행은 되지만, 의도와 다르게 동작


런타임 에러를 방지하기 위해서는 프로그램의 실행도중 발생할 수 있는 모든 경우의 수를 고려해 이에 대한 대비를 하는 것이 필요하다.

자바에서는 실행 시 발생할 수 있는 프로그램 오류를 에러와 예외 두가지로 구분한다.

- 에러 : 프로그램 코드에 의해서 수습될 수 없는 심각한 오류
- 예외 : 프로그램 코드에 의해서 수습될 수 있는 다소 미약한 오류


에러는 메모리 부족, 스택오버플로우와 같이 일반 발생하면 복구할 수 없는 심각한 오류이고, 예외는 발생하더라도 수습할 수 있는 비교적 덜 심각한 것이다.

# 예외클래스 계층구조

자바에서는 실행 시 발생할 수 있는 오류를 클래스로 정의했다. 모든 클래스의 조상은 Object클래스이므로 Exception과 Error클래스 역시 Object 클래스의 자손들이다.

![image](https://user-images.githubusercontent.com/65898555/179635052-55727488-07cc-45b4-9f51-e2a338302b38.png)

![image](https://user-images.githubusercontent.com/65898555/179635109-8ef09fbf-92b5-4147-8025-20fa3e889d5f.png)

모든 예외의 최고 조상은 Exception클래스이다.

예외 클래스는 두그룹으로 나뉠 수 있다.

1. Exception 클래스와 그 자손들(RuntimeException과 자손들 제외) : 사용자의 실수와 같은 외적인 요인에 의해 발생하는 예외
2. RuntimeException 클래스와 그 자손들 : 프로그래머의 실수로 발생하는 예외

RuntimeException클래스들은 주로 프로그래머의 실수에 의해 발생될 수 있는 예외들로 자바의 프로그래밍 요소들과 관계기 깊다.

예를 들면 배열의 범위를 벗어나는(ArrayIndexOutOfBoundsException), 값이 null인 참조변수의 멤버를 호출하려 하는경우(NullPointerException), 클래스간 형변환이 잘못된 경우(ClassCastException), 정수를 
0으로 나누려고 하는 경우(ArtihmeticException) 경우에 발생한다.


# 예외 처리하기 try-catch문

예외처리란 프로그램 실행 시 발생할 수 있는 예기치 못한 예외의 발생에 대비한 코드를 작성하는 것이다. 예외처리의 목적은 예외의 발생으로 인한 실행 중인 프로그램의 갑작스런 비정상 종료를 
막고, 정상적인 실행상태를 유지하는 것이다.

발생한 예외를 처리하지 못하면, 프로그램은 비정상적으로 종료되고, 처리되지 못한 예외는 JVM의 예외처리기가 받아서 예외의 원인을 화면에 출력한다.

```java
try{
    //예외가 발생할 가능성이 있는 문장
} catch(Exception e1){

} catch(Exception e2){

} catch(Exception e3){

}
```
하나의 try블록 다음에는 여러 종류의 예외를 처리할 수 있도록 하나 이상의 catch블록이 올 수 있다. 이 중 발생한 예외의 종류와 일치하는 단 한개의 catch 블록만 실행된다.
발생한 예외의 종류와 일치하는 catch블록이 없으면 예외는 처리되지 않는다.

```java
class ExceptionEx1 {
	public static void main(String[] args) 
   {
		try  {
			try	{	} catch (Exception e)	{ }
		} catch (Exception e)	{
			try	{	} catch (Exception e) { }	// 에러. 변수 e가 중복 선언되었다.
		} // try-catch의 끝

		try  {

		} catch (Exception e)	{

		} // try-catch의 끝
	}	// main메서드의 끝
}
```
하나의 메서드 내에 여러개의 try-catch문이 사용될 수 있다. try블럭 또는 catch블럭에 또 다른 try-catch문이 포함될 수 있다. catch블럭 내에서도 예외가 발생할 수 있기 때문이다.


```java
class ExceptionEx3 {
	public static void main(String args[]) {
		int number = 100;
		int result = 0;

		for(int i=0; i < 10; i++) {
			try {
				result = number / (int)(Math.random() * 10);
				System.out.println(result);
			} catch (ArithmeticException e)	{
				System.out.println("0");	
			} // try-catchÀÇ ³¡
		} // forÀÇ ³¡
	} 
}
```
```
16
20
11
0
25
100
25
33
14
12
```
위 예제에서는 예외처리를 해서 프로그램이 종료되지 않는다

# try-catch문에서의 흐름

try블록 내에서 예외가 발생한 경우 발생한 예외와 일치한 catch 블럭이 있는지 확인 후 일치하는 catch블럭을 찾으면 그 catch블럭내의 문장들을 수행하고 전체 try-catch문을 빠져 나온다.
그 후 다음 문장을 수행한다. 만일 일치하는 catch블럭을 차지 못하면 예외 처리를 못한다.

try블럭 내에서 예외가 발생하지 않은 경우 catch블럭을 거치지 않고 전체 try-catch문을 빠져나가서 수행을 계속한다.

# 예외 발생과 catch블럭



